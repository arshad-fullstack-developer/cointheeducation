import{q as k,j as c,A as L,c as j,o as l,w as b,b as t,f as a,i as _,t as n,e as z,k as x,y as C,n as S,F as u,m,g as f,z as y,a as q,d as v,l as w}from"./app-C6D-8OBC.js";import{_ as G}from"./AuthenticatedLayout-CslL0vUv.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CNvV6xgO.js";const Q={class:"py-6"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},J={class:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg"},K={class:"flex items-center justify-between"},W={class:"text-3xl font-bold"},X={class:"bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-lg"},Y={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold"},tt={class:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-6 text-white shadow-lg"},et={class:"flex items-center justify-between"},st={class:"text-3xl font-bold"},ot={class:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg"},nt={class:"flex items-center justify-between"},lt={class:"text-3xl font-bold"},at={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},rt=["value"],it={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},dt={class:"bg-white rounded-2xl shadow-lg p-6"},ct={class:"space-y-4"},ut={class:"flex items-center"},mt={class:"font-medium capitalize"},ft={class:"text-right"},gt={class:"font-bold text-gray-800"},pt={class:"text-sm text-gray-500"},bt={class:"bg-white rounded-2xl shadow-lg p-6"},xt={class:"space-y-3"},_t={class:"font-medium text-gray-800"},yt={class:"text-sm text-gray-600"},vt={class:"text-right"},wt={class:"font-bold text-gray-800"},ht={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},jt={class:"text-center"},Ct={class:"font-semibold text-gray-800"},St={class:"text-2xl font-bold text-blue-600"},qt={class:"text-sm text-gray-600"},Dt={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},It={class:"overflow-x-auto"},Pt={class:"table table-zebra w-full"},Tt={class:"font-medium"},Ut={class:"font-medium"},Nt={class:"text-sm text-gray-600"},Rt={class:"text-center"},Et={class:"text-center"},At={class:"text-center font-medium"},Bt={class:"text-center"},Vt={class:"text-center"},Mt={class:"flex space-x-2 justify-center"},Ot=["onClick"],Ft={key:0,class:"text-center py-12"},Lt={key:0,class:"mt-6 flex justify-center"},zt={class:"join"},Gt={class:"mt-8"},$t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qt={class:"flex items-center justify-between mb-4"},Ht={class:"text-lg font-semibold text-gray-800"},Jt={class:"badge badge-success"},Kt={class:"space-y-2"},Wt={class:"flex justify-between text-sm"},Xt={class:"font-medium"},Yt={class:"flex justify-between text-sm"},Zt={class:"font-medium"},te={class:"flex justify-between text-sm"},ee={class:"font-medium"},se={__name:"ProcurementReport",props:{procurements:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(d){const r=d,i=k({start_date:r.filters.start_date||"",end_date:r.filters.end_date||"",status:r.filters.status||"",godown_id:r.filters.godown_id||""}),h=k([]),D=c(()=>r.procurements.data.filter(o=>o.status==="received").length),I=c(()=>r.procurements.data.reduce((o,e)=>o+(e.quantity||0),0)),P=c(()=>r.procurements.data.reduce((o,e)=>o+(e.total_cost||0),0)),T=c(()=>{const o={};return r.procurements.data.forEach(e=>{const s=e.status||"unknown";o[s]=(o[s]||0)+1}),o}),U=c(()=>{const o={};return r.procurements.data.forEach(e=>{const s=e.stationary_item_id;o[s]||(o[s]={stationary_item_id:s,stationary_item:e.stationary_item,total_quantity:0}),o[s].total_quantity+=e.quantity}),Object.values(o).sort((e,s)=>s.total_quantity-e.total_quantity).slice(0,5)}),N=c(()=>{const o={};return r.procurements.data.forEach(e=>{const s=new Date(e.procurement_date).toLocaleDateString("en-IN",{month:"long",year:"numeric"});o[s]||(o[s]={month:s,total_cost:0,procurement_count:0}),o[s].total_cost+=e.total_cost||0,o[s].procurement_count++}),Object.values(o).sort((e,s)=>{const p=new Date(e.month);return new Date(s.month)-p}).slice(0,4)}),R=c(()=>{const o={};return r.procurements.data.forEach(e=>{const s=e.supplier_name||"Unknown Supplier";o[s]||(o[s]={name:s,procurement_count:0,total_quantity:0,total_cost:0}),o[s].procurement_count++,o[s].total_quantity+=e.quantity||0,o[s].total_cost+=e.total_cost||0}),Object.values(o).map(e=>({...e,avg_cost_per_item:e.total_quantity>0?e.total_cost/e.total_quantity:0})).sort((e,s)=>s.total_cost-e.total_cost)}),E=o=>{switch(o){case"pending":return"bg-yellow-500";case"ordered":return"bg-blue-500";case"received":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},A=o=>{switch(o){case"pending":return"badge badge-warning";case"ordered":return"badge badge-info";case"received":return"badge badge-success";case"cancelled":return"badge badge-error";default:return"badge badge-neutral"}},g=o=>new Intl.NumberFormat("en-IN").format(o||0),B=o=>new Date(o).toLocaleDateString("en-IN"),V=()=>{const o=new URLSearchParams;Object.entries(i.value).forEach(([e,s])=>{s&&o.append(e,s)}),window.location.href=`${window.location.pathname}?${o.toString()}`},M=o=>{console.log("Receiving procurement:",o)},O=()=>{console.log("Exporting procurement report...")},F=()=>{window.print()};return L(()=>{h.value=[...new Set(r.procurements.data.map(o=>o.godown).filter(Boolean))]}),(o,e)=>(l(),j(G,null,{header:b(()=>[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"}," Procurement Report ",-1)),t("div",{class:"flex space-x-3"},[t("button",{onClick:O,class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0"},[...e[4]||(e[4]=[t("i",{class:"fas fa-download mr-2"},null,-1),f("Export Report ",-1)])]),t("button",{onClick:F,class:"btn btn-secondary bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0"},[...e[5]||(e[5]=[t("i",{class:"fas fa-print mr-2"},null,-1),f("Print ",-1)])])])])]),default:b(()=>[t("div",Q,[t("div",H,[t("div",J,[t("div",K,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-purple-100 text-sm font-medium"},"Total Procurements",-1)),t("p",W,n(d.procurements.data.length),1)]),e[8]||(e[8]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-shopping-cart"})],-1))])]),t("div",X,[t("div",Y,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-green-100 text-sm font-medium"},"Received Items",-1)),t("p",Z,n(D.value),1)]),e[10]||(e[10]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-check-circle"})],-1))])]),t("div",tt,[t("div",et,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-blue-100 text-sm font-medium"},"Total Quantity",-1)),t("p",st,n(I.value),1)]),e[12]||(e[12]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-boxes"})],-1))])]),t("div",ot,[t("div",nt,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-orange-100 text-sm font-medium"},"Total Cost",-1)),t("p",lt,n(g(P.value)),1)]),e[14]||(e[14]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-rupee-sign"})],-1))])])]),t("div",at,[t("form",{onSubmit:z(V,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.start_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[C,i.value.start_date]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.end_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[C,i.value.end_date]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.status=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[...e[17]||(e[17]=[t("option",{value:""},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"ordered"},"Ordered",-1),t("option",{value:"received"},"Received",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],512),[[S,i.value.status]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Godown",-1)),x(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.godown_id=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[e[19]||(e[19]=t("option",{value:""},"All Godowns",-1)),(l(!0),a(u,null,m(h.value,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,rt))),128))],512),[[S,i.value.godown_id]])]),e[21]||(e[21]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 w-full"},[t("i",{class:"fas fa-search mr-2"}),f("Apply Filters ")])],-1))],32)]),t("div",it,[t("div",dt,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-pie text-purple-500 mr-2"}),f(" Status Distribution ")],-1)),t("div",ct,[(l(!0),a(u,null,m(T.value,(s,p)=>(l(),a("div",{key:p,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",ut,[t("div",{class:y([E(p),"w-4 h-4 rounded-full mr-3"])},null,2),t("span",mt,n(p),1)]),t("div",ft,[t("p",gt,n(s),1),t("p",pt,n((s/d.procurements.data.length*100).toFixed(1))+"%",1)])]))),128))])]),t("div",bt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-star text-yellow-500 mr-2"}),f(" Top Procured Items ")],-1)),t("div",xt,[(l(!0),a(u,null,m(U.value,s=>(l(),a("div",{key:s.stationary_item_id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",_t,n(s.stationary_item?.name||"Unknown Item"),1),t("p",yt,n(s.stationary_item?.company||"Unknown Company"),1)]),t("div",vt,[t("p",wt,n(s.total_quantity),1),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500"},"units procured",-1))])]))),128))])])]),t("div",ht,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-line text-blue-500 mr-2"}),f(" Cost Analysis by Month ")],-1)),t("div",kt,[(l(!0),a(u,null,m(N.value,s=>(l(),a("div",{key:s.month,class:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border border-blue-200"},[t("div",jt,[t("h4",Ct,n(s.month),1),t("p",St,n(g(s.total_cost)),1),t("p",qt,n(s.procurement_count)+" procurements",1)])]))),128))])]),t("div",Dt,[t("div",It,[t("table",Pt,[e[29]||(e[29]=t("thead",null,[t("tr",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white"},[t("th",{class:"text-left"},"Date"),t("th",{class:"text-left"},"Item"),t("th",{class:"text-left"},"Supplier"),t("th",{class:"text-left"},"Godown"),t("th",{class:"text-center"},"Quantity"),t("th",{class:"text-center"},"Unit Cost"),t("th",{class:"text-center"},"Total Cost"),t("th",{class:"text-center"},"Status"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[(l(!0),a(u,null,m(d.procurements.data,s=>(l(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Tt,n(B(s.procurement_date)),1),t("td",null,[t("div",null,[t("p",Ut,n(s.stationary_item?.name||"Unknown Item"),1),t("p",Nt,n(s.stationary_item?.company||"Unknown Company"),1)])]),t("td",null,n(s.supplier_name),1),t("td",null,n(s.godown?.name||"Unknown Godown"),1),t("td",Rt,n(s.quantity),1),t("td",Et,n(g(s.unit_cost)),1),t("td",At,n(g(s.total_cost)),1),t("td",Bt,[t("span",{class:y(A(s.status))},n(s.status),3)]),t("td",Vt,[t("div",Mt,[q(v(w),{href:o.route("procurements.show",s.id),class:"btn btn-sm btn-outline btn-primary"},{default:b(()=>[...e[26]||(e[26]=[t("i",{class:"fas fa-eye"},null,-1)])]),_:2},1032,["href"]),q(v(w),{href:o.route("procurements.edit",s.id),class:"btn btn-sm btn-outline btn-secondary"},{default:b(()=>[...e[27]||(e[27]=[t("i",{class:"fas fa-edit"},null,-1)])]),_:2},1032,["href"]),s.status==="ordered"?(l(),a("button",{key:0,onClick:p=>M(s.id),class:"btn btn-sm btn-outline btn-success"},[...e[28]||(e[28]=[t("i",{class:"fas fa-check"},null,-1)])],8,Ot)):_("",!0)])])]))),128))])])]),d.procurements.data.length===0?(l(),a("div",Ft,[...e[30]||(e[30]=[t("div",{class:"text-6xl text-gray-300 mb-4"},[t("i",{class:"fas fa-shopping-cart"})],-1),t("h3",{class:"text-xl font-medium text-gray-600 mb-2"},"No procurements found",-1),t("p",{class:"text-gray-500"},"Try adjusting your filters to see more results.",-1)])])):_("",!0)]),d.procurements.data.length>0?(l(),a("div",Lt,[t("div",zt,[(l(!0),a(u,null,m(d.procurements.links,s=>(l(),j(v(w),{key:s.label,href:s.url,class:y(["join-item btn",s.active?"btn-active bg-gradient-to-r from-purple-500 to-pink-500 text-white":"btn-outline"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):_("",!0),t("div",Gt,[e[34]||(e[34]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-truck text-green-500 mr-2"}),f(" Supplier Performance Summary ")],-1)),t("div",$t,[(l(!0),a(u,null,m(R.value,s=>(l(),a("div",{key:s.name,class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-green-500"},[t("div",Qt,[t("h4",Ht,n(s.name),1),t("span",Jt,n(s.procurement_count),1)]),t("div",Kt,[t("div",Wt,[e[31]||(e[31]=t("span",{class:"text-gray-600"},"Total Items:",-1)),t("span",Xt,n(s.total_quantity),1)]),t("div",Yt,[e[32]||(e[32]=t("span",{class:"text-gray-600"},"Total Cost:",-1)),t("span",Zt,n(g(s.total_cost)),1)]),t("div",te,[e[33]||(e[33]=t("span",{class:"text-gray-600"},"Avg. Cost/Item:",-1)),t("span",ee,n(g(s.avg_cost_per_item)),1)])])]))),128))])])])]),_:1}))}},ie=$(se,[["__scopeId","data-v-5b773b1b"]]);export{ie as default};

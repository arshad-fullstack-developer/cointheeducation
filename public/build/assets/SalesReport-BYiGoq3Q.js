import{q as _,j as c,A as V,c as v,o,w as h,b as t,f as l,i as w,t as n,e as F,k as g,y as k,n as T,F as m,m as p,g as f,z as x,d as M,l as A}from"./app-C6D-8OBC.js";import{_ as L}from"./AuthenticatedLayout-CslL0vUv.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CNvV6xgO.js";const O={class:"py-6"},$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},H={class:"bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-lg"},Q={class:"flex items-center justify-between"},G={class:"text-3xl font-bold"},J={class:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-6 text-white shadow-lg"},K={class:"flex items-center justify-between"},W={class:"text-3xl font-bold"},X={class:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg"},Y={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold"},tt={class:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg"},et={class:"flex items-center justify-between"},st={class:"text-3xl font-bold"},at={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},nt=["value"],ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},lt={class:"bg-white rounded-2xl shadow-lg p-6"},rt={class:"space-y-4"},it={class:"flex items-center"},dt={class:"font-medium capitalize"},ut={class:"text-right"},ct={class:"font-bold text-gray-800"},mt={class:"text-sm text-gray-500"},pt={class:"bg-white rounded-2xl shadow-lg p-6"},ft={class:"space-y-3"},gt={class:"font-medium text-gray-800"},xt={class:"text-sm text-gray-600"},bt={class:"text-right"},yt={class:"font-bold text-gray-800"},_t={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},vt={class:"overflow-x-auto"},ht={class:"table table-zebra w-full"},wt={class:"font-medium"},kt={class:"font-medium"},Tt={class:"text-sm text-gray-600"},Ct={class:"text-center"},St={class:"text-center"},jt={class:"text-center font-medium"},Dt={class:"text-center"},Pt={class:"text-green-600 font-medium"},Ut={class:"text-center"},It={key:0,class:"text-orange-600 font-medium"},qt={key:1,class:"text-gray-400"},Rt={class:"text-center"},Bt={class:"text-center"},Et={key:0,class:"text-center py-12"},Nt={key:0,class:"mt-6 flex justify-center"},Vt={class:"join"},Ft={__name:"SalesReport",props:{sales:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(d){const r=d,i=_({start_date:r.filters.start_date||"",end_date:r.filters.end_date||"",payment_type:r.filters.payment_type||"",customer_id:r.filters.customer_id||""}),y=_([]),C=c(()=>r.sales.data.reduce((a,e)=>a+(e.total_amount||0),0)),S=c(()=>r.sales.data.reduce((a,e)=>a+(e.profit_amount||0),0)),j=c(()=>r.sales.data.reduce((a,e)=>a+(e.donation_amount||0),0)),D=c(()=>{const a={};return r.sales.data.forEach(e=>{const s=e.payment_type||"unknown";a[s]=(a[s]||0)+1}),a}),P=c(()=>{const a={};return r.sales.data.forEach(e=>{const s=e.stationary_item_id;a[s]||(a[s]={stationary_item_id:s,stationary_item:e.stationary_item,total_quantity:0}),a[s].total_quantity+=e.quantity}),Object.values(a).sort((e,s)=>s.total_quantity-e.total_quantity).slice(0,5)}),U=a=>{switch(a){case"cash":return"bg-green-500";case"credit":return"bg-blue-500";default:return"bg-gray-500"}},I=a=>{switch(a){case"cash":return"badge badge-success";case"credit":return"badge badge-info";default:return"badge badge-neutral"}},q=a=>{switch(a){case"completed":return"badge badge-success";case"pending":return"badge badge-warning";case"cancelled":return"badge badge-error";default:return"badge badge-neutral"}},u=a=>new Intl.NumberFormat("en-IN").format(a||0),R=a=>new Date(a).toLocaleDateString("en-IN"),B=()=>{const a=new URLSearchParams;Object.entries(i.value).forEach(([e,s])=>{s&&a.append(e,s)}),window.location.href=`${window.location.pathname}?${a.toString()}`},E=()=>{console.log("Exporting sales report...")},N=()=>{window.print()};return V(()=>{y.value=[...new Set(r.sales.data.map(a=>a.customer).filter(Boolean))]}),(a,e)=>(o(),v(L,null,{header:h(()=>[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"}," Sales Report ",-1)),t("div",{class:"flex space-x-3"},[t("button",{onClick:E,class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0"},[...e[4]||(e[4]=[t("i",{class:"fas fa-download mr-2"},null,-1),f("Export Report ",-1)])]),t("button",{onClick:N,class:"btn btn-secondary bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0"},[...e[5]||(e[5]=[t("i",{class:"fas fa-print mr-2"},null,-1),f("Print ",-1)])])])])]),default:h(()=>[t("div",O,[t("div",$,[t("div",H,[t("div",Q,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-green-100 text-sm font-medium"},"Total Sales",-1)),t("p",G,n(d.sales.data.length),1)]),e[8]||(e[8]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-shopping-cart"})],-1))])]),t("div",J,[t("div",K,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-blue-100 text-sm font-medium"},"Total Revenue",-1)),t("p",W,n(u(C.value)),1)]),e[10]||(e[10]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-rupee-sign"})],-1))])]),t("div",X,[t("div",Y,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-purple-100 text-sm font-medium"},"Total Profit",-1)),t("p",Z,n(u(S.value)),1)]),e[12]||(e[12]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-chart-line"})],-1))])]),t("div",tt,[t("div",et,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-orange-100 text-sm font-medium"},"Total Donations",-1)),t("p",st,n(u(j.value)),1)]),e[14]||(e[14]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-heart"})],-1))])])]),t("div",at,[t("form",{onSubmit:F(B,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.start_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[k,i.value.start_date]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.end_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[k,i.value.end_date]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Type",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.payment_type=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[...e[17]||(e[17]=[t("option",{value:""},"All Types",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"credit"},"Credit",-1)])],512),[[T,i.value.payment_type]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Customer",-1)),g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.customer_id=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[e[19]||(e[19]=t("option",{value:""},"All Customers",-1)),(o(!0),l(m,null,p(y.value,s=>(o(),l("option",{key:s.id,value:s.id},n(s.name),9,nt))),128))],512),[[T,i.value.customer_id]])]),e[21]||(e[21]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 w-full"},[t("i",{class:"fas fa-search mr-2"}),f("Apply Filters ")])],-1))],32)]),t("div",ot,[t("div",lt,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-pie text-purple-500 mr-2"}),f(" Payment Type Distribution ")],-1)),t("div",rt,[(o(!0),l(m,null,p(D.value,(s,b)=>(o(),l("div",{key:b,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",it,[t("div",{class:x([U(b),"w-4 h-4 rounded-full mr-3"])},null,2),t("span",dt,n(b),1)]),t("div",ut,[t("p",ct,n(s),1),t("p",mt,n((s/d.sales.data.length*100).toFixed(1))+"%",1)])]))),128))])]),t("div",pt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-star text-yellow-500 mr-2"}),f(" Top Selling Items ")],-1)),t("div",ft,[(o(!0),l(m,null,p(P.value,s=>(o(),l("div",{key:s.stationary_item_id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",gt,n(s.stationary_item?.name||"Unknown Item"),1),t("p",xt,n(s.stationary_item?.company||"Unknown Company"),1)]),t("div",bt,[t("p",yt,n(s.total_quantity),1),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500"},"units sold",-1))])]))),128))])])]),t("div",_t,[t("div",vt,[t("table",ht,[e[25]||(e[25]=t("thead",null,[t("tr",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white"},[t("th",{class:"text-left"},"Date"),t("th",{class:"text-left"},"Customer"),t("th",{class:"text-left"},"Item"),t("th",{class:"text-center"},"Quantity"),t("th",{class:"text-center"},"Unit Price"),t("th",{class:"text-center"},"Total Amount"),t("th",{class:"text-center"},"Profit"),t("th",{class:"text-center"},"Donation"),t("th",{class:"text-center"},"Payment Type"),t("th",{class:"text-center"},"Status")])],-1)),t("tbody",null,[(o(!0),l(m,null,p(d.sales.data,s=>(o(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",wt,n(R(s.sale_date)),1),t("td",null,n(s.customer?.name||"Unknown Customer"),1),t("td",null,[t("div",null,[t("p",kt,n(s.stationary_item?.name||"Unknown Item"),1),t("p",Tt,n(s.stationary_item?.company||"Unknown Company"),1)])]),t("td",Ct,n(s.quantity),1),t("td",St,n(u(s.unit_price)),1),t("td",jt,n(u(s.total_amount)),1),t("td",Dt,[t("span",Pt,n(u(s.profit_amount||0)),1)]),t("td",Ut,[s.donation_amount>0?(o(),l("span",It,n(u(s.donation_amount)),1)):(o(),l("span",qt,"-"))]),t("td",Rt,[t("span",{class:x(I(s.payment_type))},n(s.payment_type),3)]),t("td",Bt,[t("span",{class:x(q(s.status))},n(s.status),3)])]))),128))])])]),d.sales.data.length===0?(o(),l("div",Et,[...e[26]||(e[26]=[t("div",{class:"text-6xl text-gray-300 mb-4"},[t("i",{class:"fas fa-shopping-cart"})],-1),t("h3",{class:"text-xl font-medium text-gray-600 mb-2"},"No sales found",-1),t("p",{class:"text-gray-500"},"Try adjusting your filters to see more results.",-1)])])):w("",!0)]),d.sales.data.length>0?(o(),l("div",Nt,[t("div",Vt,[(o(!0),l(m,null,p(d.sales.links,s=>(o(),v(M(A),{key:s.label,href:s.url,class:x(["join-item btn",s.active?"btn-active bg-gradient-to-r from-purple-500 to-pink-500 text-white":"btn-outline"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):w("",!0)])]),_:1}))}},Ot=z(Ft,[["__scopeId","data-v-3fe11340"]]);export{Ot as default};

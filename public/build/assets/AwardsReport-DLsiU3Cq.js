import{q as h,j as u,A as L,c as k,o as l,w as g,b as t,f as n,i as S,t as o,e as O,k as b,y as j,n as A,F as c,m,g as p,z as x,a as q,d as _,l as w}from"./app-C6D-8OBC.js";import{_ as P}from"./AuthenticatedLayout-CslL0vUv.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CNvV6xgO.js";const H={class:"py-6"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Q={class:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg"},J={class:"flex items-center justify-between"},K={class:"text-3xl font-bold"},W={class:"bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-lg"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold"},Z={class:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-6 text-white shadow-lg"},tt={class:"flex items-center justify-between"},et={class:"text-3xl font-bold"},st={class:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg"},at={class:"flex items-center justify-between"},ot={class:"text-3xl font-bold"},lt={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},nt=["value"],dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},rt={class:"bg-white rounded-2xl shadow-lg p-6"},it={class:"space-y-4"},ut={class:"flex items-center"},ct={class:"font-medium capitalize"},mt={class:"text-right"},pt={class:"font-bold text-gray-800"},ft={class:"text-sm text-gray-500"},gt={class:"bg-white rounded-2xl shadow-lg p-6"},bt={class:"space-y-3"},xt={class:"font-medium text-gray-800"},yt={class:"text-sm text-gray-600"},_t={class:"text-right"},wt={class:"font-bold text-gray-800"},vt={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},ht={class:"overflow-x-auto"},kt={class:"table table-zebra w-full"},St={class:"font-medium"},jt={class:"font-medium"},At={class:"text-sm text-gray-600"},qt={class:"font-medium"},Tt={class:"text-sm text-gray-600"},It={class:"text-center"},Ut={class:"text-center"},Ct={class:"text-center font-medium"},Vt={class:"text-center"},Dt={class:"text-center"},Bt={class:"text-center"},Nt={class:"flex space-x-2 justify-center"},Et={key:0,class:"text-center py-12"},Rt={key:0,class:"mt-6 flex justify-center"},zt={class:"join"},Ft={class:"mt-8"},Mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Lt={class:"flex items-center justify-between mb-4"},Ot={class:"text-lg font-semibold text-gray-800"},Pt={class:"badge badge-primary"},$t={class:"space-y-2"},Ht={class:"flex justify-between text-sm"},Gt={class:"font-medium"},Qt={class:"flex justify-between text-sm"},Jt={class:"font-medium"},Kt={class:"flex justify-between text-sm"},Wt={class:"font-medium"},Xt={__name:"AwardsReport",props:{awards:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(i){const d=i,r=h({start_date:d.filters.start_date||"",end_date:d.filters.end_date||"",award_type:d.filters.award_type||"",school_id:d.filters.school_id||""}),v=h([]),T=u(()=>d.awards.data.reduce((a,e)=>a+(e.quantity||0),0)),I=u(()=>d.awards.data.reduce((a,e)=>a+(e.total_cost||0),0)),U=u(()=>new Set(d.awards.data.map(e=>e.student_id).filter(Boolean)).size),C=u(()=>{const a={};return d.awards.data.forEach(e=>{const s=e.award_type||"unknown";a[s]=(a[s]||0)+1}),a}),V=u(()=>{const a={};return d.awards.data.forEach(e=>{const s=e.stationary_item_id;a[s]||(a[s]={stationary_item_id:s,stationary_item:e.stationary_item,total_quantity:0}),a[s].total_quantity+=e.quantity}),Object.values(a).sort((e,s)=>s.total_quantity-e.total_quantity).slice(0,5)}),D=u(()=>{const a={};return d.awards.data.forEach(e=>{const s=e.school_id;a[s]||(a[s]={id:s,name:e.school?.name||"Unknown School",total_awards:0,total_items:0,total_value:0,unique_students:new Set}),a[s].total_awards++,a[s].total_items+=e.quantity,a[s].total_value+=e.total_cost,a[s].unique_students.add(e.student_id)}),Object.values(a).map(e=>({...e,unique_students:e.unique_students.size}))}),B=a=>{switch(a){case"academic":return"bg-blue-500";case"sports":return"bg-green-500";case"cultural":return"bg-purple-500";case"need_based":return"bg-orange-500";default:return"bg-gray-500"}},N=a=>{switch(a){case"academic":return"badge badge-info";case"sports":return"badge badge-success";case"cultural":return"badge badge-primary";case"need_based":return"badge badge-warning";default:return"badge badge-neutral"}},E=a=>{switch(a){case"awarded":return"badge badge-success";case"pending":return"badge badge-warning";case"returned":return"badge badge-error";default:return"badge badge-neutral"}},f=a=>new Intl.NumberFormat("en-IN").format(a||0),R=a=>new Date(a).toLocaleDateString("en-IN"),z=()=>{const a=new URLSearchParams;Object.entries(r.value).forEach(([e,s])=>{s&&a.append(e,s)}),window.location.href=`${window.location.pathname}?${a.toString()}`},F=()=>{console.log("Exporting awards report...")},M=()=>{window.print()};return L(()=>{v.value=[...new Set(d.awards.data.map(a=>a.school).filter(Boolean))]}),(a,e)=>(l(),k(P,null,{header:g(()=>[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"}," Awards Report ",-1)),t("div",{class:"flex space-x-3"},[t("button",{onClick:F,class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0"},[...e[4]||(e[4]=[t("i",{class:"fas fa-download mr-2"},null,-1),p("Export Report ",-1)])]),t("button",{onClick:M,class:"btn btn-secondary bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0"},[...e[5]||(e[5]=[t("i",{class:"fas fa-print mr-2"},null,-1),p("Print ",-1)])])])])]),default:g(()=>[t("div",H,[t("div",G,[t("div",Q,[t("div",J,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-purple-100 text-sm font-medium"},"Total Awards",-1)),t("p",K,o(i.awards.data.length),1)]),e[8]||(e[8]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-trophy"})],-1))])]),t("div",W,[t("div",X,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-green-100 text-sm font-medium"},"Total Items Awarded",-1)),t("p",Y,o(T.value),1)]),e[10]||(e[10]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-boxes"})],-1))])]),t("div",Z,[t("div",tt,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-blue-100 text-sm font-medium"},"Total Value",-1)),t("p",et,o(f(I.value)),1)]),e[12]||(e[12]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-rupee-sign"})],-1))])]),t("div",st,[t("div",at,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-orange-100 text-sm font-medium"},"Unique Students",-1)),t("p",ot,o(U.value),1)]),e[14]||(e[14]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-users"})],-1))])])]),t("div",lt,[t("form",{onSubmit:O(z,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.start_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[j,r.value.start_date]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.end_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[j,r.value.end_date]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Award Type",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.award_type=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[...e[17]||(e[17]=[t("option",{value:""},"All Types",-1),t("option",{value:"academic"},"Academic",-1),t("option",{value:"sports"},"Sports",-1),t("option",{value:"cultural"},"Cultural",-1),t("option",{value:"need_based"},"Need Based",-1)])],512),[[A,r.value.award_type]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.school_id=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[e[19]||(e[19]=t("option",{value:""},"All Schools",-1)),(l(!0),n(c,null,m(v.value,s=>(l(),n("option",{key:s.id,value:s.id},o(s.name),9,nt))),128))],512),[[A,r.value.school_id]])]),e[21]||(e[21]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 w-full"},[t("i",{class:"fas fa-search mr-2"}),p("Apply Filters ")])],-1))],32)]),t("div",dt,[t("div",rt,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-pie text-purple-500 mr-2"}),p(" Award Type Distribution ")],-1)),t("div",it,[(l(!0),n(c,null,m(C.value,(s,y)=>(l(),n("div",{key:y,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",ut,[t("div",{class:x([B(y),"w-4 h-4 rounded-full mr-3"])},null,2),t("span",ct,o(y.replace("_"," ")),1)]),t("div",mt,[t("p",pt,o(s),1),t("p",ft,o((s/i.awards.data.length*100).toFixed(1))+"%",1)])]))),128))])]),t("div",gt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-star text-yellow-500 mr-2"}),p(" Top Awarded Items ")],-1)),t("div",bt,[(l(!0),n(c,null,m(V.value,s=>(l(),n("div",{key:s.stationary_item_id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",xt,o(s.stationary_item?.name||"Unknown Item"),1),t("p",yt,o(s.stationary_item?.company||"Unknown Company"),1)]),t("div",_t,[t("p",wt,o(s.total_quantity),1),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500"},"units awarded",-1))])]))),128))])])]),t("div",vt,[t("div",ht,[t("table",kt,[e[27]||(e[27]=t("thead",null,[t("tr",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white"},[t("th",{class:"text-left"},"Date"),t("th",{class:"text-left"},"Student"),t("th",{class:"text-left"},"School"),t("th",{class:"text-left"},"Item"),t("th",{class:"text-center"},"Quantity"),t("th",{class:"text-center"},"Unit Cost"),t("th",{class:"text-center"},"Total Cost"),t("th",{class:"text-center"},"Award Type"),t("th",{class:"text-center"},"Status"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[(l(!0),n(c,null,m(i.awards.data,s=>(l(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",St,o(R(s.award_date)),1),t("td",null,[t("div",null,[t("p",jt,o(s.student?.name||"Unknown Student"),1),t("p",At,o(s.student?.grade||"Unknown Grade"),1)])]),t("td",null,o(s.school?.name||"Unknown School"),1),t("td",null,[t("div",null,[t("p",qt,o(s.stationary_item?.name||"Unknown Item"),1),t("p",Tt,o(s.stationary_item?.company||"Unknown Company"),1)])]),t("td",It,o(s.quantity),1),t("td",Ut,o(f(s.unit_cost)),1),t("td",Ct,o(f(s.total_cost)),1),t("td",Vt,[t("span",{class:x(N(s.award_type))},o(s.award_type),3)]),t("td",Dt,[t("span",{class:x(E(s.status))},o(s.status),3)]),t("td",Bt,[t("div",Nt,[q(_(w),{href:a.route("stationary-awards.show",s.id),class:"btn btn-sm btn-outline btn-primary"},{default:g(()=>[...e[25]||(e[25]=[t("i",{class:"fas fa-eye"},null,-1)])]),_:2},1032,["href"]),q(_(w),{href:a.route("stationary-awards.edit",s.id),class:"btn btn-sm btn-outline btn-secondary"},{default:g(()=>[...e[26]||(e[26]=[t("i",{class:"fas fa-edit"},null,-1)])]),_:2},1032,["href"])])])]))),128))])])]),i.awards.data.length===0?(l(),n("div",Et,[...e[28]||(e[28]=[t("div",{class:"text-6xl text-gray-300 mb-4"},[t("i",{class:"fas fa-trophy"})],-1),t("h3",{class:"text-xl font-medium text-gray-600 mb-2"},"No awards found",-1),t("p",{class:"text-gray-500"},"Try adjusting your filters to see more results.",-1)])])):S("",!0)]),i.awards.data.length>0?(l(),n("div",Rt,[t("div",zt,[(l(!0),n(c,null,m(i.awards.links,s=>(l(),k(_(w),{key:s.label,href:s.url,class:x(["join-item btn",s.active?"btn-active bg-gradient-to-r from-purple-500 to-pink-500 text-white":"btn-outline"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):S("",!0),t("div",Ft,[e[32]||(e[32]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-school text-blue-500 mr-2"}),p(" School Performance Summary ")],-1)),t("div",Mt,[(l(!0),n(c,null,m(D.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-purple-500"},[t("div",Lt,[t("h4",Ot,o(s.name),1),t("span",Pt,o(s.total_awards),1)]),t("div",$t,[t("div",Ht,[e[29]||(e[29]=t("span",{class:"text-gray-600"},"Total Items:",-1)),t("span",Gt,o(s.total_items),1)]),t("div",Qt,[e[30]||(e[30]=t("span",{class:"text-gray-600"},"Total Value:",-1)),t("span",Jt,o(f(s.total_value)),1)]),t("div",Kt,[e[31]||(e[31]=t("span",{class:"text-gray-600"},"Unique Students:",-1)),t("span",Wt,o(s.unique_students),1)])])]))),128))])])])]),_:1}))}},se=$(Xt,[["__scopeId","data-v-a8fc549d"]]);export{se as default};

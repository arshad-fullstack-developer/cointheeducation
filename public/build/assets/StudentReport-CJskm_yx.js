import{q as y,j as u,A as L,c as k,o as a,w as p,b as t,f as n,i as S,t as l,e as O,k as b,y as j,n as A,F as c,m,g as f,H as z,z as G,a as h,d as x,l as v}from"./app-C6D-8OBC.js";import{_ as P}from"./AuthenticatedLayout-CslL0vUv.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CNvV6xgO.js";const $={class:"py-6"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},J={class:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-white shadow-lg"},K={class:"flex items-center justify-between"},Q={class:"text-3xl font-bold"},W={class:"bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-lg"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold"},Z={class:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-6 text-white shadow-lg"},tt={class:"flex items-center justify-between"},et={class:"text-3xl font-bold"},st={class:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-lg"},ot={class:"flex items-center justify-between"},lt={class:"text-3xl font-bold"},at={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},nt=["value"],rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},dt={class:"bg-white rounded-2xl shadow-lg p-6"},it={class:"space-y-3"},ut={class:"flex items-center"},ct={class:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold mr-3"},mt={class:"font-medium"},ft={class:"text-right"},pt={class:"font-bold text-gray-800"},gt={class:"text-sm text-gray-500"},bt={class:"bg-white rounded-2xl shadow-lg p-6"},xt={class:"space-y-3"},vt={class:"font-medium text-gray-800"},_t={class:"text-sm text-gray-600"},ht={class:"text-right"},wt={class:"w-20 bg-gray-200 rounded-full h-2"},yt={class:"text-xs text-gray-500 mt-1"},kt={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},St={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},jt={class:"flex items-center justify-between mb-3"},At={class:"font-semibold text-gray-800"},Gt={class:"badge badge-primary"},Vt={class:"space-y-1 text-sm"},Dt={class:"text-gray-600"},Nt={class:"text-gray-600"},Ct={class:"text-purple-600 font-medium"},Et={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},Tt={class:"overflow-x-auto"},Ut={class:"table table-zebra w-full"},Ft={class:"font-medium"},Rt={class:"text-center"},Bt={class:"text-center"},It={class:"text-center"},Mt={class:"text-center font-medium"},Lt={class:"text-center font-medium"},Ot={class:"text-center"},zt={class:"text-center"},Pt={class:"flex space-x-2 justify-center"},Ht={key:0,class:"text-center py-12"},$t={key:0,class:"mt-6 flex justify-center"},qt={class:"join"},Jt={class:"mt-8"},Kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qt={class:"flex items-center justify-between mb-4"},Wt={class:"text-lg font-semibold text-gray-800"},Xt={class:"badge badge-primary"},Yt={class:"space-y-2"},Zt={class:"flex justify-between text-sm"},te={class:"font-medium"},ee={class:"flex justify-between text-sm"},se={class:"font-medium"},oe={class:"flex justify-between text-sm"},le={class:"font-medium"},ae={__name:"StudentReport",props:{students:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(d){const r=d,i=y({enrollment_date:r.filters.enrollment_date||"",grade:r.filters.grade||"",school_id:r.filters.school_id||"",search:r.filters.search||""}),w=y([]),V=u(()=>r.students.data.filter(o=>o.status!=="dropout").length),D=u(()=>r.students.data.reduce((o,e)=>o+(e.award_count||0),0)),N=u(()=>r.students.data.reduce((o,e)=>o+(e.total_award_value||0),0)),C=u(()=>{const o={};return r.students.data.forEach(e=>{const s=e.grade||"unknown";o[s]=(o[s]||0)+1}),o}),E=u(()=>{const o={};return r.students.data.forEach(e=>{const s=e.school_id;o[s]||(o[s]={id:s,name:e.school?.name||"Unknown School",student_count:0}),o[s].student_count++}),Object.values(o).sort((e,s)=>s.student_count-e.student_count)}),T=u(()=>r.students.data.sort((o,e)=>(e.award_count||0)-(o.award_count||0)).slice(0,6)),U=u(()=>{const o={};return r.students.data.forEach(e=>{const s=e.school_id;o[s]||(o[s]={id:s,name:e.school?.name||"Unknown School",student_count:0,total_awards:0,total_award_value:0}),o[s].student_count++,o[s].total_awards+=e.award_count||0,o[s].total_award_value+=e.total_award_value||0}),Object.values(o).sort((e,s)=>s.student_count-e.student_count)}),F=o=>{switch(o){case"active":return"badge badge-success";case"dropout":return"badge badge-error";case"graduated":return"badge badge-info";default:return"badge badge-success"}},g=o=>new Intl.NumberFormat("en-IN").format(o||0),R=o=>new Date(o).toLocaleDateString("en-IN"),B=()=>{const o=new URLSearchParams;Object.entries(i.value).forEach(([e,s])=>{s&&o.append(e,s)}),window.location.href=`${window.location.pathname}?${o.toString()}`},I=()=>{console.log("Exporting student report...")},M=()=>{window.print()};return L(()=>{w.value=[...new Set(r.students.data.map(o=>o.school).filter(Boolean))]}),(o,e)=>(a(),k(P,null,{header:p(()=>[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"}," Student Report ",-1)),t("div",{class:"flex space-x-3"},[t("button",{onClick:I,class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0"},[...e[4]||(e[4]=[t("i",{class:"fas fa-download mr-2"},null,-1),f("Export Report ",-1)])]),t("button",{onClick:M,class:"btn btn-secondary bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0"},[...e[5]||(e[5]=[t("i",{class:"fas fa-print mr-2"},null,-1),f("Print ",-1)])])])])]),default:p(()=>[t("div",$,[t("div",q,[t("div",J,[t("div",K,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-purple-100 text-sm font-medium"},"Total Students",-1)),t("p",Q,l(d.students.data.length),1)]),e[8]||(e[8]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-user-graduate"})],-1))])]),t("div",W,[t("div",X,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-green-100 text-sm font-medium"},"Active Students",-1)),t("p",Y,l(V.value),1)]),e[10]||(e[10]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-user-check"})],-1))])]),t("div",Z,[t("div",tt,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-blue-100 text-sm font-medium"},"Total Awards",-1)),t("p",et,l(D.value),1)]),e[12]||(e[12]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-trophy"})],-1))])]),t("div",st,[t("div",ot,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-orange-100 text-sm font-medium"},"Award Value",-1)),t("p",lt,l(g(N.value)),1)]),e[14]||(e[14]=t("div",{class:"text-4xl opacity-20"},[t("i",{class:"fas fa-rupee-sign"})],-1))])])]),t("div",at,[t("form",{onSubmit:O(B,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Enrollment Date",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.enrollment_date=s),type:"date",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[j,i.value.enrollment_date]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grade",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.grade=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[...e[16]||(e[16]=[t("option",{value:""},"All Grades",-1),t("option",{value:"1"},"Grade 1",-1),t("option",{value:"2"},"Grade 2",-1),t("option",{value:"3"},"Grade 3",-1),t("option",{value:"4"},"Grade 4",-1),t("option",{value:"5"},"Grade 5",-1),t("option",{value:"6"},"Grade 6",-1),t("option",{value:"7"},"Grade 7",-1),t("option",{value:"8"},"Grade 8",-1),t("option",{value:"9"},"Grade 9",-1),t("option",{value:"10"},"Grade 10",-1),t("option",{value:"11"},"Grade 11",-1),t("option",{value:"12"},"Grade 12",-1)])],512),[[A,i.value.grade]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"School",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.school_id=s),class:"select select-bordered w-full focus:ring-2 focus:ring-purple-500"},[e[18]||(e[18]=t("option",{value:""},"All Schools",-1)),(a(!0),n(c,null,m(w.value,s=>(a(),n("option",{key:s.id,value:s.id},l(s.name),9,nt))),128))],512),[[A,i.value.school_id]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.search=s),type:"text",placeholder:"Search students...",class:"input input-bordered w-full focus:ring-2 focus:ring-purple-500"},null,512),[[j,i.value.search]])]),e[21]||(e[21]=t("div",{class:"flex items-end"},[t("button",{type:"submit",class:"btn btn-primary bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 w-full"},[t("i",{class:"fas fa-search mr-2"}),f("Apply Filters ")])],-1))],32)]),t("div",rt,[t("div",dt,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-bar text-blue-500 mr-2"}),f(" Grade Distribution ")],-1)),t("div",it,[(a(!0),n(c,null,m(C.value,(s,_)=>(a(),n("div",{key:_,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",ut,[t("div",ct,l(_),1),t("span",mt,"Grade "+l(_),1)]),t("div",ft,[t("p",pt,l(s),1),t("p",gt,l((s/d.students.data.length*100).toFixed(1))+"%",1)])]))),128))])]),t("div",bt,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-school text-green-500 mr-2"}),f(" School Distribution ")],-1)),t("div",xt,[(a(!0),n(c,null,m(E.value,s=>(a(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",vt,l(s.name),1),t("p",_t,l(s.student_count)+" students",1)]),t("div",ht,[t("div",wt,[t("div",{class:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full",style:z({width:s.student_count/d.students.data.length*100+"%"})},null,4)]),t("p",yt,l((s.student_count/d.students.data.length*100).toFixed(1))+"%",1)])]))),128))])])]),t("div",kt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-crown text-yellow-500 mr-2"}),f(" Top Awarded Students ")],-1)),t("div",St,[(a(!0),n(c,null,m(T.value,s=>(a(),n("div",{key:s.id,class:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200"},[t("div",jt,[t("h4",At,l(s.name),1),t("span",Gt,l(s.award_count)+" awards",1)]),t("div",Vt,[t("p",Dt,"Grade "+l(s.grade),1),t("p",Nt,l(s.school?.name||"Unknown School"),1),t("p",Ct,l(g(s.total_award_value||0)),1)])]))),128))])]),t("div",Et,[t("div",Tt,[t("table",Ut,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"bg-gradient-to-r from-purple-600 to-pink-600 text-white"},[t("th",{class:"text-left"},"Name"),t("th",{class:"text-left"},"School"),t("th",{class:"text-center"},"Grade"),t("th",{class:"text-center"},"Age"),t("th",{class:"text-center"},"Enrollment Date"),t("th",{class:"text-center"},"Award Count"),t("th",{class:"text-center"},"Award Value"),t("th",{class:"text-center"},"Status"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[(a(!0),n(c,null,m(d.students.data,s=>(a(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ft,l(s.name),1),t("td",null,l(s.school?.name||"Unknown School"),1),t("td",Rt,l(s.grade),1),t("td",Bt,l(s.age||"N/A"),1),t("td",It,l(R(s.enrollment_date)),1),t("td",Mt,l(s.award_count||0),1),t("td",Lt,l(g(s.total_award_value||0)),1),t("td",Ot,[t("span",{class:G(F(s.status))},l(s.status||"Active"),3)]),t("td",zt,[t("div",Pt,[h(x(v),{href:o.route("students.show",s.id),class:"btn btn-sm btn-outline btn-primary"},{default:p(()=>[...e[25]||(e[25]=[t("i",{class:"fas fa-eye"},null,-1)])]),_:2},1032,["href"]),h(x(v),{href:o.route("students.edit",s.id),class:"btn btn-sm btn-outline btn-secondary"},{default:p(()=>[...e[26]||(e[26]=[t("i",{class:"fas fa-edit"},null,-1)])]),_:2},1032,["href"]),h(x(v),{href:o.route("students.awards",s.id),class:"btn btn-sm btn-outline btn-success"},{default:p(()=>[...e[27]||(e[27]=[t("i",{class:"fas fa-trophy"},null,-1)])]),_:2},1032,["href"])])])]))),128))])])]),d.students.data.length===0?(a(),n("div",Ht,[...e[29]||(e[29]=[t("div",{class:"text-6xl text-gray-300 mb-4"},[t("i",{class:"fas fa-user-graduate"})],-1),t("h3",{class:"text-xl font-medium text-gray-600 mb-2"},"No students found",-1),t("p",{class:"text-gray-500"},"Try adjusting your filters to see more results.",-1)])])):S("",!0)]),d.students.data.length>0?(a(),n("div",$t,[t("div",qt,[(a(!0),n(c,null,m(d.students.links,s=>(a(),k(x(v),{key:s.label,href:s.url,class:G(["join-item btn",s.active?"btn-active bg-gradient-to-r from-purple-500 to-pink-500 text-white":"btn-outline"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):S("",!0),t("div",Jt,[e[33]||(e[33]=t("h3",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center"},[t("i",{class:"fas fa-chart-line text-purple-500 mr-2"}),f(" School Performance Summary ")],-1)),t("div",Kt,[(a(!0),n(c,null,m(U.value,s=>(a(),n("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-purple-500"},[t("div",Qt,[t("h4",Wt,l(s.name),1),t("span",Xt,l(s.student_count),1)]),t("div",Yt,[t("div",Zt,[e[30]||(e[30]=t("span",{class:"text-gray-600"},"Total Awards:",-1)),t("span",te,l(s.total_awards),1)]),t("div",ee,[e[31]||(e[31]=t("span",{class:"text-gray-600"},"Award Value:",-1)),t("span",se,l(g(s.total_award_value)),1)]),t("div",oe,[e[32]||(e[32]=t("span",{class:"text-gray-600"},"Avg. Awards/Student:",-1)),t("span",le,l((s.total_awards/s.student_count).toFixed(1)),1)])])]))),128))])])])]),_:1}))}},ue=H(ae,[["__scopeId","data-v-41bb1ab7"]]);export{ue as default};

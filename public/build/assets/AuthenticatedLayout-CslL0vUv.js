import{A as _}from"./ApplicationLogo-CNvV6xgO.js";import{q as f,A as $,B as a,s as z,J as L,f as i,o as s,b as r,i as w,z as d,a as m,w as h,d as n,H as E,t as c,l as v,F as k,m as M,c as H,r as B}from"./app-C6D-8OBC.js";const D={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},R={class:"flex"},j={class:"flex items-center justify-between h-16 px-6 border-b border-white/30 bg-gradient-to-r from-white/50 to-purple-50/30 flex-shrink-0"},A={key:0,class:"p-2 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105"},V=["src","alt"],O={class:"text-lg font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"},I={class:"text-xs text-gray-500"},U={class:"flex-1 overflow-y-auto"},W={class:"px-4 py-4"},F={class:"space-y-2"},T={key:0},G=["d"],N={class:"font-medium"},J={key:1},K=["d"],Q={class:"font-medium flex-1"},X={key:0,class:"ml-6 mt-2 space-y-1"},Y={class:"font-medium"},Z={class:"border-t border-white/30 bg-gradient-to-r from-white/50 to-purple-50/30 flex-shrink-0 relative user-profile-section"},ee={class:"h-8 w-8 lg:h-10 lg:w-10 rounded-xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center shadow-lg flex-shrink-0"},re={class:"text-xs lg:text-sm font-bold text-white"},te={class:"flex-1 text-left min-w-0"},oe={class:"text-xs lg:text-sm font-semibold text-gray-900 truncate"},se={class:"text-xs text-gray-500 truncate"},ne={key:0,class:"absolute bottom-full left-0 right-0 mb-1 bg-white rounded-xl shadow-lg border border-white/30 backdrop-blur-sm z-50"},ie={class:"py-2"},ae={class:"flex-1 lg:ml-0"},le={class:"sticky top-0 z-30 lg:hidden bg-white/90 backdrop-blur-sm border-b border-white/30 shadow-sm"},ue={class:"flex items-center justify-between h-16 px-4"},de={class:"flex items-center space-x-3"},ce={class:"p-2 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl"},pe={class:"p-4 lg:p-8"},me={class:"max-w-7xl mx-auto"},xe={__name:"AuthenticatedLayout",setup(he){f(!1);const l=f(!1),p=f(!1),g=f(!1),b=()=>{p.value=!1},P=()=>{g.value=!g.value};$(()=>{document.addEventListener("click",t=>{const e=document.querySelector(".user-profile-section");e&&!e.contains(t.target)&&b()}),y()});const y=()=>{const t=a().props.siteSettings;if(t?.site_title&&(document.title=t.site_title),t?.favicon){const e=document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]');if(e)e.href=`/storage/${t.favicon}`;else{const o=document.createElement("link");o.rel="icon",o.href=`/storage/${t.favicon}`,document.head.appendChild(o)}}};z(()=>a().props.siteSettings,()=>{y()},{deep:!0}),L(()=>{document.removeEventListener("click",b)});const S=t=>{const e=a().props.auth.user;if(e?.role?.name==="super_admin")return!0;if(e?.custom_permissions&&e.custom_permissions.length>0){if(e.custom_permissions.includes(t))return console.log(`🔒 Custom permissions mode - ${t}: ✅ ALLOWED (exact match)`),!0;const u=t.split(".")[0];return e.custom_permissions.includes(u)?(console.log(`🔒 Custom permissions mode - ${t}: ✅ ALLOWED (module: ${u})`),!0):(console.log(`🔒 Custom permissions mode - ${t}: ❌ DENIED`),!1)}const o=e?.permissions?.includes(t)||!1;return console.log(`👥 Role permissions mode - ${t}: ${o?"✅ ALLOWED":"❌ DENIED"}`),o},C=[{name:"Dashboard",href:route("dashboard"),icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",current:route().current("dashboard"),requiredPermission:"dashboard.view"},{name:"Stationary Items",href:route("stationary-items.index"),icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",current:route().current("stationary-items.*"),requiredPermission:"stationary-items.view"},{name:"Godowns",href:route("godowns.index"),icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",current:route().current("godowns.*"),requiredPermission:"godowns.view"},{name:"Procurements",href:route("procurements.index"),icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z",current:route().current("procurements.*"),requiredPermission:"procurements.view"},{name:"Customers",href:route("customers.index"),icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",current:route().current("customers.*"),requiredPermission:"customers.view"},{name:"Sales",href:route("sales.index"),icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",current:route().current("sales.*"),requiredPermission:"sales.view"},{name:"Schools",href:route("schools.index"),icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",current:route().current("schools.*"),requiredPermission:"schools.view"},{name:"Students",href:route("students.index"),icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",current:route().current("students.*"),requiredPermission:"students.view"},{name:"Stationary Awards",href:route("stationary-awards.index"),icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",current:route().current("stationary-awards.*"),requiredPermission:"stationary-awards.view"},{name:"Stock Movements",href:route("stock-movements.index"),icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",current:route().current("stock-movements.*"),requiredPermission:"stock-movements.view"},{name:"User Management",href:route("users.index"),icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",current:route().current("users.*"),requiredPermission:"users.view"},{name:"Site Settings",href:route("site-settings.index"),icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",current:route().current("site-settings.*"),requiredPermission:"site-settings.view"},{name:"Reports",href:"#",icon:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",current:route().current("reports.*"),requiredPermission:"reports.view",children:[{name:"Stock Report",href:route("reports.stock"),current:route().current("reports.stock"),requiredPermission:"reports.view"},{name:"Sales Report",href:route("reports.sales"),current:route().current("reports.sales"),requiredPermission:"reports.view"},{name:"Awards Report",href:route("reports.awards"),current:route().current("reports.awards"),requiredPermission:"reports.view"},{name:"Customer Report",href:route("reports.customers"),current:route().current("reports.customers"),requiredPermission:"reports.view"},{name:"School Report",href:route("reports.schools"),current:route().current("reports.schools"),requiredPermission:"reports.view"},{name:"Student Report",href:route("reports.students"),current:route().current("reports.students"),requiredPermission:"reports.view"},{name:"Procurement Report",href:route("reports.procurements"),current:route().current("reports.procurements"),requiredPermission:"reports.view"},{name:"Expiry Report",href:route("reports.expiry"),current:route().current("reports.expiry"),requiredPermission:"reports.view"},{name:"Low Stock Report",href:route("reports.low-stock"),current:route().current("reports.low-stock"),requiredPermission:"reports.view"}]}],x=a().props.auth.user;console.log("🔍 User permissions debug:",{role:x?.role?.name,rolePermissions:x?.permissions,customPermissions:x?.custom_permissions});const q=C.filter(t=>{if(t.requiredPermission){const e=S(t.requiredPermission);return console.log(`🔍 Navigation item "${t.name}" (${t.requiredPermission}): ${e?"✅ SHOW":"❌ HIDE"}`),e}return!0});return(t,e)=>(s(),i("div",D,[e[17]||(e[17]=r("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[r("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-purple-200 to-pink-300 rounded-full opacity-10 blur-3xl"}),r("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-pink-200 to-orange-300 rounded-full opacity-10 blur-3xl"})],-1)),l.value?(s(),i("div",{key:0,class:"fixed inset-0 z-40 lg:hidden",onClick:e[0]||(e[0]=o=>l.value=!1)},[...e[8]||(e[8]=[r("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75"},null,-1)])])):w("",!0),r("div",R,[r("div",{class:d(["fixed inset-y-0 left-0 z-50 w-80 min-h-screen bg-white/95 backdrop-blur-sm shadow-2xl border-r border-white/30 flex flex-col transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",l.value?"translate-x-0":"-translate-x-full"])},[r("div",j,[m(n(v),{href:t.route("dashboard"),class:"flex items-center space-x-3 group"},{default:h(()=>[n(a)().props.siteSettings?.logo_light?(s(),i("img",{key:1,src:`/storage/${n(a)().props.siteSettings.logo_light}`,alt:n(a)().props.siteSettings.company_name||"Logo",class:"p-2 rounded-xl shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",style:E({width:n(a)().props.siteSettings.logo_width?`${n(a)().props.siteSettings.logo_width}px`:"40px",height:n(a)().props.siteSettings.logo_height?`${n(a)().props.siteSettings.logo_height}px`:"40px"})},null,12,V)):(s(),i("div",A,[m(_,{class:"h-6 w-6 fill-current text-white"})])),r("div",null,[r("h1",O,c(n(a)().props.siteSettings?.company_name||"CoinTheEducation"),1),r("p",I,c(n(a)().props.siteSettings?.company_tagline||"Learn • Earn • Grow"),1)])]),_:1},8,["href"]),r("button",{onClick:e[1]||(e[1]=o=>l.value=!1),class:"lg:hidden p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors duration-200"},[...e[9]||(e[9]=[r("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",U,[r("nav",W,[r("div",F,[(s(!0),i(k,null,M(n(q),o=>(s(),i(k,{key:o.name},[o.children?(s(),i("div",J,[r("div",{class:d(["group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 cursor-pointer",o.current?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"]),onClick:P},[(s(),i("svg",{class:d(["mr-3 h-5 w-5 transition-colors duration-200",o.current?"text-white":"text-gray-400 group-hover:text-purple-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:o.icon},null,8,K)],2)),r("span",Q,c(o.name),1),(s(),i("svg",{class:d(["h-4 w-4 transition-transform duration-200",g.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[10]||(e[10]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2),g.value?(s(),i("div",X,[(s(!0),i(k,null,M(o.children,u=>(s(),H(n(v),{key:u.name,href:u.href,class:d(["group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200",u.current?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]),onClick:e[3]||(e[3]=ve=>l.value=!1)},{default:h(()=>[r("span",Y,c(u.name),1)]),_:2},1032,["href","class"]))),128))])):w("",!0)])):(s(),i("div",T,[m(n(v),{href:o.href,class:d(["group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200",o.current?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"]),onClick:e[2]||(e[2]=u=>l.value=!1)},{default:h(()=>[(s(),i("svg",{class:d(["mr-3 h-5 w-5 transition-colors duration-200",o.current?"text-white":"text-gray-400 group-hover:text-purple-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:o.icon},null,8,G)],2)),r("span",N,c(o.name),1)]),_:2},1032,["href","class"])]))],64))),128))])])]),r("div",Z,[r("button",{onClick:e[4]||(e[4]=o=>p.value=!p.value),class:"w-full flex items-center space-x-3 p-3 lg:p-4 hover:bg-white/50 transition-colors duration-200"},[r("div",ee,[r("span",re,c(t.$page.props.auth.user.name.charAt(0).toUpperCase()),1)]),r("div",te,[r("p",oe,c(t.$page.props.auth.user.name),1),r("p",se,c(t.$page.props.auth.user.email),1)]),(s(),i("svg",{class:d(["h-3 w-3 lg:h-4 lg:w-4 text-gray-400 flex-shrink-0 transition-transform duration-200",p.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[11]||(e[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),p.value?(s(),i("div",ne,[r("div",ie,[m(n(v),{href:t.route("profile.edit"),class:"flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 transition-colors duration-200",onClick:e[5]||(e[5]=o=>{p.value=!1,l.value=!1})},{default:h(()=>[...e[12]||(e[12]=[r("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),r("span",null,"Profile",-1)])]),_:1},8,["href"]),m(n(v),{href:t.route("logout"),method:"post",as:"button",class:"flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-red-50 hover:text-red-700 transition-colors duration-200 w-full text-left",onClick:e[6]||(e[6]=o=>{p.value=!1,l.value=!1})},{default:h(()=>[...e[13]||(e[13]=[r("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),r("span",null,"Log Out",-1)])]),_:1},8,["href"])])])):w("",!0)])],2),r("div",ae,[r("div",le,[r("div",ue,[r("button",{onClick:e[7]||(e[7]=o=>l.value=!0),class:"p-2 rounded-xl text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors duration-200"},[...e[14]||(e[14]=[r("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),r("div",de,[m(n(v),{href:t.route("dashboard"),class:"flex items-center space-x-3"},{default:h(()=>[r("div",ce,[m(_,{class:"h-6 w-6 fill-current text-white"})]),e[15]||(e[15]=r("span",{class:"text-lg font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"}," CoinTheEducation ",-1))]),_:1},8,["href"])]),e[16]||(e[16]=r("div",{class:"w-10"},null,-1))])]),r("div",pe,[r("div",me,[B(t.$slots,"default")])])])])]))}};export{xe as _};
